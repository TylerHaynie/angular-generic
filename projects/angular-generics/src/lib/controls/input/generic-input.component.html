<!-- *** Layout *** -->
<!-- //TODO: clean up and split into smaller parts -->

<div class="generic-input"
     [ngClass]="{'label-left': labelPosition == 'left' && showLabel, 
                 'label-top': labelPosition == 'above' && showLabel}"
     [ngStyle]="{'width': isNumber(width) ? width + 'px' : width, 'height': isNumber(height) ? height + 'px' : height}">
  <div *ngIf="showLabel" class="label-container" [ngStyle]="{'place-self': labelPlacement}">
    <label>
      <ng-content></ng-content>
    </label>
  </div>

  <ng-container *ngIf="type=='custom'">
    <ng-container *ngTemplateOutlet="customTemplate"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='text' || type=='string'">
    <ng-container *ngTemplateOutlet="textBox"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='number'">
    <ng-container *ngTemplateOutlet="numberBox"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='date'">
    <ng-container *ngTemplateOutlet="dateBox"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='check'">
    <ng-container *ngTemplateOutlet="checkBox"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='select'">
    <ng-container *ngTemplateOutlet="selectBox"></ng-container>
  </ng-container>

  <ng-container *ngIf="type=='file'">
    <ng-container *ngTemplateOutlet="fileBox"></ng-container>
  </ng-container>
</div>

<!-- *** Conditionals *** -->

<!-- Text Box SubTypes -->
<ng-template #textBox>
  <ng-container *ngIf="subtype == 'default'">
    <ng-container *ngTemplateOutlet="defaultText"></ng-container>
  </ng-container>

  <ng-container *ngIf="subtype=='textArea'">
    <ng-container *ngTemplateOutlet="textArea"></ng-container>
  </ng-container>
</ng-template>

<!-- Number SubTypes -->
<ng-template #numberBox>
  <ng-container *ngIf="subtype=='default'">
    <ng-container *ngTemplateOutlet="defaultNumber"></ng-container>
  </ng-container>
  <ng-container *ngIf="subtype=='range'">
    <ng-container *ngTemplateOutlet="defaultRange"></ng-container>
  </ng-container>
</ng-template>

<!-- Date Box SubTypes -->
<ng-template #dateBox>
  <ng-container *ngIf="subtype=='default'">
    <ng-container *ngTemplateOutlet="defaultDate"></ng-container>
  </ng-container>
  <ng-container *ngIf="subtype=='range'">
    <ng-container *ngTemplateOutlet="defaultRange"></ng-container>
  </ng-container>
</ng-template>

<!-- Check Box SubTypes -->
<ng-template #checkBox>
  <ng-container *ngIf="subtype=='default'">
    <ng-container *ngTemplateOutlet="defaultCheck"></ng-container>
  </ng-container>
  <ng-container *ngIf="subtype=='slide'">
    <ng-container *ngTemplateOutlet="checkSlide"></ng-container>
  </ng-container>
</ng-template>

<!-- Select Box SubTypes-->
<ng-template #selectBox>
  <ng-container *ngIf="subtype=='default'">
    <ng-container *ngTemplateOutlet="defaultSelect"></ng-container>
  </ng-container>
</ng-template>

<!-- File Box SubTypes -->
<ng-template #fileBox>
  <ng-container *ngIf="subtype == 'default'">
    <ng-container *ngTemplateOutlet="defaultFile"></ng-container>
  </ng-container>
</ng-template>


<!--  *** TEMPLATES ***  -->

<!-- Default Text Box -->
<ng-template #defaultText>
  <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" type="text" [(ngModel)]="value" [placeholder]="placeholder" />
</ng-template>

<!-- Text Area -->
<ng-template #textArea>
  <textarea [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" [cols]="textColumns" [rows]="textRows" [placeholder]="placeholder"
            [(ngModel)]="value"></textarea>
</ng-template>

<!-- Number -->
<ng-template #defaultNumber>
  <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" type="number" [(ngModel)]="value" [placeholder]="placeholder" />
</ng-template>

<!-- Default Range -->
<ng-template #defaultRange>
  <div class="range">
    <div class="range-box">
      <span>{{fromLabel}}</span>
      <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" [type]="type" [(ngModel)]="fromValue" (change)="rangeChange()" />
      <div>
        <i class="fas"
           [ngClass]="{'fa-hashtag': type=='number', 'fa-calendar-alt': type=='date'}">
        </i>
      </div>
    </div>
    <div class="range-box">
      <span>{{toLabel}}</span>
      <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" [type]="type" [(ngModel)]="toValue" (change)="rangeChange()" />
      <div>
        <i class="fas"
           [ngClass]="{'fa-hashtag': type=='number', 'fa-calendar-alt': type=='date'}">
        </i>
      </div>
    </div>
  </div>
</ng-template>

<!-- Default Date -->
<ng-template #defaultDate>
  <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" type="date" [(ngModel)]="value" />
</ng-template>

<!-- Default Checkbox -->
<ng-template #defaultCheck>
  <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" type="checkbox" [(ngModel)]="value" />
</ng-template>

<!-- Slide Checkbox -->
<ng-template #checkSlide>
  <div class="checkbox-slider">
    <input [name]="name" [disabled]="disabled" [attr.required]="required ? '' : null" id="genericSliderCheckbox" type="checkbox" [(ngModel)]="value" />
    <label for="genericSliderCheckbox"></label>
  </div>
</ng-template>

<!-- Default Select -->
<ng-template #defaultSelect>
  <ng-container *ngIf="!disabled">
    <select [name]="name" [(ngModel)]="value" [attr.required]="required ? '' : null" [attr.multiple]="multiple ? '' : null">
      <option value="" disabled selected hidden>{{placeholder}}</option>
      <option *ngIf="allowEmpty" [value]="null"></option>
      <option *ngFor="let item of options" [value]="valueProperty == '' ? item : item[valueProperty]">{{item[displayProperty]}}</option>
    </select>
  </ng-container>
  <ng-container *ngIf="disabled">
    <input [name]="name" disabled type="text" [attr.required]="required ? '' : null" [value]="getSelectedDisplay()">
  </ng-container>
</ng-template>

<!-- Default File -->
<ng-template #defaultFile>
  <input [name]="name" [disabled]="disabled" [attr.multiple]="multiple ? '' : null" [attr.required]="required ? '' : null" type="file" [(ngModel)]="value" [placeholder]="placeholder" />
</ng-template>